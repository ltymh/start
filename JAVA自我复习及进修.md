####  JAVA自我复习与进修

+ **JAVA中堆和栈的区别**

  JAVA在程序运行时，在内存中划分5片空间进行数据的存储。分别是：1：寄存器。2：本地方法区。3：方法区。4：栈。5：堆。其中，堆与栈的区别如下：

  + 各司其职

    **基本数据类型、局部变量**都是存放在栈内存中的，用完就消失。

    而new创建的**实例化对象及数组**，是存放在堆内存中的，用完之后靠垃圾回收机制不定期自动消除。

  + 独有还是共享

    栈内存归属于单个线程，每个线程都会有一个栈内存，其存储的变量只能在其所属线程中可见，即栈内存可以理解成线程的私有内存。
    而堆内存中的对象对所有线程可见。堆内存中的对象可以被所有线程访问。

  + 空间大小

    栈的内存要远远小于堆的内存

  + 异常错误

    如果栈内存没有可用的空间存储方法调用和局部变量，JVM会抛出java.lang.StackOverFlowError。
    而如果是堆内存没有可用的空间存储生成的对象，JVM会抛出java.lang.OutOfMemoryError。

+ **八大基本类型**

  byte、short、int、long、float、double、boolean、char

  基本类型都有对应的包装类型。

+ **string**

  + string被声明为final，因此不可被继承。

    在 Java 8 中，String 内部使用**char 数组**存储数据。

    在 Java 9 之后，String 类的实现改用 byte 数组存储字符串，同时使用 `coder` 来标识使用了哪种编码。

  + 不可变的好处

    + 可以缓存hash值：因为 String 的 hash 值经常被使用，例如 String 用做 HashMap 的 key。不可变的特性可以使得 hash 值也不可变，因此只需要进行一次计算。
    +  String Pool 的需要：如果一个 String 对象已经被创建过了，那么就会从 String Pool 中取得引用。只有 String 是不可变的，才可能使用 String Pool。
    + 安全性：String 经常作为参数，String 不可变性可以保证参数不可变。例如在作为网络连接参数的情况下如果 String 是可变的，那么在网络连接过程中，String 被改变，改变 String 对象的那一方以为现在连接的是其它主机，而实际情况却不一定是。
    + 线程安全：String 不可变性天生具备线程安全，可以在多个线程中安全地使用。

+ **string、string buffer、string builder**

  + 可变性：string不可变，其他可变
  + 线程安全
    + string不可变，线程安全
    + string builder不是线程安全的
    + string buffer线程安全，内部使用synchronized进行同步。

+ **string pool**

  字符串常量池，具体区别是两字符串同时调用另一个字符串的**intern**方法时，都是**引用到**那个字符串，而分别**new**则不是引用到那个字符串而是**重新创建**两个新的字符串。

+ **运算**

  + 参数传递：JAVA的参数传递使用值传递而不是引用传递，所以在指针传值是传递的是指针地址，是完全不同的两个对象，因此在一方改变时另一方无变化。
  + float和double：